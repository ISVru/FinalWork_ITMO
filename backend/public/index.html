<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>Авторизация</title>
    <script src="https://kit.fontawesome.com/9cf9a6173e.js" crossorigin="anonymous"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.25.0/axios.min.js" crossorigin="anonymous"></script>
    <link rel="icon" href="img/favicon.ico" type="image/svg+xml">
    <link rel="stylesheet" href="css/auth.css">
</head>

<body>
<header>
    <nav class="container" id="menu">
        <a href="main.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <div class="submenu">
            <a href="#">Категория 1</a>
            <a href="#">Категория 2</a>
            <a href="#">Категория 3</a>
        </div>
        <a href="delivery.html">Доставка и оплата</a>
               <a href="#">Корзина</a>
      </nav>
</header>
<form id="forma_login" action="#" method="post">
        <div>
            <h3>Вход в личный кабинет</h3>
            <input id="login" type="text" required name="login">
            <span class="login-icon"><i class="far fa-user"></i></span>
        </div>
        <div>
            <input id="password" type="password" required minlength="6" name="password">
            <span class="pwd-icon"><i class="fas fa-unlock-alt"></i></span>
        </div>
        <div>

            <input id="remember" type="checkbox" name="remember" checked value="remember">
            <label class="remember-label" for="remember">Запомнить</label>
        </div>

        <input type="submit" value="Войти">
          </form>
<script>
function fm_login(e){
e.preventDefault()
let data = {
      login: login.value,
      pass: password.value
    }
  
    axios.post('/auth', data)
      .then((res)=>{
        if(res.status == 200){
          localStorage.setItem('user_name', data.login);
          location.href = "/admin";
        }
      })
      .catch((err)=>{
        console.log(err);
      });}
forma_login.onsubmit=fm_login;
</script>


</body>

</html>